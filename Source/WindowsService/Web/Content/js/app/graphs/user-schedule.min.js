(function(){App.UserScheduleGraph=function(){function n(n,t,i){this.parentTagId=n;this.data=t;this.showUnassignedTasks=i}return n.prototype.draw=function(){var n;return this.init(),this.doDraw(),n=function(n){return function(){return n.doDraw()}}(this),setInterval(n,500)},n.prototype.init=function(){var n,t;return n={top:20,right:20,bottom:30,left:60},t=d3.max(this.data,function(n){return n.user.name.length})*6,n.left=t+5,this.startDate=new Date,this.width=960-n.left-n.right,this.height=500-n.top-n.bottom,this.svg=d3.select("#"+this.parentTagId).append("svg").attr("width",this.width+n.left+n.right).attr("height",this.height+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),this.initAxes()},n.prototype.initAxes=function(){var n,t;return n=d3.time.scale().domain([this.startDate,d3.time.day.offset(this.startDate,d3.max(this.data,function(n){return n.stats.max})+2)]).range([0,this.width]),t=d3.scale.ordinal().domain(d3.map(this.data,function(n){return n.user.name}).keys()).rangePoints([0,this.height],1),this.xAxis=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format("%b %e")),this.yAxis=d3.svg.axis().scale(t).orient("left").ticks(10),this.svg.append("g").attr("class","axis x.axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Developers")},n.prototype.doDraw=function(){var r,i,t,n;return r=d3.time.format("%Y-%m-%d"),this.dataForDrawing=this.data.filter(function(n){return function(t){return n.showUnassignedTasks===!0||n.showUnassignedTasks===!1&&t.user.name!=="Unassigned"}}(this)),t=d3.time.scale().domain([this.startDate,d3.time.day.offset(this.startDate,d3.max(this.dataForDrawing,function(n){return n.stats.max})+2)]).range([0,this.width]),n=d3.scale.ordinal().domain(d3.map(this.dataForDrawing,function(n){return n.user.name}).keys()).rangePoints([0,this.height],1),this.yAxis=d3.svg.axis().scale(n).orient("left").ticks(10),this.svg.selectAll(".y.axis").transition().duration(500).call(this.yAxis),this.svg.selectAll(".x.axis").call(this.xAxis),this.drawBar(t,n,this.startDate),this.drawFrontWhisker(t,n,this.startDate),this.drawBackWhisker(t,n,this.startDate),i=this.svg.selectAll("line.median").data(this.dataForDrawing.filter(function(n){return n.stats.median!==n.stats.quartile1&&n.stats.median!==n.stats.quartile3})),i.transition().duration(500).attr("y1",function(t){return n(t.user.name)-10}).attr("y2",function(t){return n(t.user.name)+10}),i.exit().remove(),i.enter().append("line").attr("class","median").attr("x1",function(n){return function(i){return n.getCoordinateFromDate(t,n.startDate,i.stats.median)}}(this)).attr("x2",function(n){return function(i){return n.getCoordinateFromDate(t,n.startDate,i.stats.median)}}(this)).attr("y1",function(t){return n(t.user.name)-10}).attr("y2",function(t){return n(t.user.name)+10})},n.prototype.drawBar=function(n,t,i){var r,u,f,o,e;return this.startDate=i,f=function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.quartile1)}}(this),u=function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.quartile3)}}(this),e=function(n){return n.stats.quartile1===n.stats.median&&n.stats.quartile3===n.stats.median?f(n)-3:f(n)},o=function(n){return n.stats.quartile1===n.stats.median&&n.stats.quartile3===n.stats.median?u(n)+3:u(n)},r=this.svg.selectAll("rect.bar").data(this.dataForDrawing),r.transition().duration(500).attr("y",function(n){return t(n.user.name)-10}),r.enter().append("rect").attr("class","bar").attr("x",function(n){return e(n)}).attr("height",20).attr("y",function(n){return t(n.user.name)-10}).attr("width",function(){return function(n){return o(n)-e(n)}}(this)),r.exit().attr("opacity",1).transition().duration(500).attr("opacity",1e-6).each("end",function(){return d3.select(this).remove()})},n.prototype.drawFrontWhisker=function(n,t,i){var r,u,e,f,o,s;return this.startDate=i,u=this.svg.selectAll("g.front-whisker").data(this.dataForDrawing),f=function(n){return n.stats.min},e=function(n){return n.stats.quartile1},s=function(t){return function(i,r){return t.getCoordinateFromDate(n,t.startDate,r(i))}}(this),r=function(n){return f(n)===e(n)?s(n,f)-6:s(n,f)},u.transition().duration(500).attr("transform",function(n){return"translate("+r(n)+", "+(t(n.user.name)-10)+")"}),u.exit().remove(),o=u.enter().append("g").attr("class","front-whisker").attr("transform",function(n){return"translate("+r(n)+", "+(t(n.user.name)-10)+")"}),o.append("line").attr("class","whisker").attr("x1",0).attr("x2",function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,e(i))-r(i)}}(this)).attr("y1",10).attr("y2",10),o.append("line").attr("class","whisker").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",20)},n.prototype.drawBackWhisker=function(n,t,i){var u,f,e,r,o,s;return this.startDate=i,u=this.svg.selectAll("g.back-whisker").data(this.dataForDrawing),r=function(n){return n.stats.quartile3},e=function(n){return n.stats.max},s=function(t){return function(i,r){return t.getCoordinateFromDate(n,t.startDate,r(i))}}(this),f=function(n){return r(n)===e(n)?s(n,e)+6:s(n,e)},u.transition().duration(500).attr("transform",function(i){return function(u){return"translate("+i.getCoordinateFromDate(n,i.startDate,r(u))+", "+(t(u.user.name)-10)+")"}}(this)),o=u.enter().append("g").attr("class","back-whisker").attr("transform",function(i){return function(u){return"translate("+i.getCoordinateFromDate(n,i.startDate,r(u))+", "+(t(u.user.name)-10)+")"}}(this)),u.exit().remove(),o.append("line").attr("class","whisker").attr("x1",0).attr("x2",function(t){return function(i){return f(i)-t.getCoordinateFromDate(n,t.startDate,r(i))}}(this)).attr("y1",10).attr("y2",10),o.append("line").attr("class","whisker").attr("x1",function(t){return function(i){return f(i)-t.getCoordinateFromDate(n,t.startDate,r(i))}}(this)).attr("x2",function(t){return function(i){return f(i)-t.getCoordinateFromDate(n,t.startDate,r(i))}}(this)).attr("y1",0).attr("y2",20)},n.prototype.getCoordinateFromDate=function(n,t,i){return this.startDate=t,n(d3.time.day.offset(this.startDate,i))},n}()}).call(this);
//# sourceMappingURL=user-schedule.min.js.map
