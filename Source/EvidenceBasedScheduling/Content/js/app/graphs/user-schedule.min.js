(function(){App.UserScheduleGraph=function(){function n(n,t,i){this.parentTagId=n;this.data=t;this.showUnassignedTasks=i}return n.prototype.draw=function(){var n;return this.init(),this.doDraw(),n=function(n){return function(){return n.doDraw()}}(this),setInterval(n,1e3)},n.prototype.init=function(){var n,t;return n={top:20,right:20,bottom:30,left:60},t=d3.max(this.data,function(n){return n.user.name.length})*6,n.left=t+5,this.startDate=new Date,this.width=960-n.left-n.right,this.height=500-n.top-n.bottom,this.svg=d3.select("#"+this.parentTagId).append("svg").attr("width",this.width+n.left+n.right).attr("height",this.height+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),this.initAxes()},n.prototype.initAxes=function(){var n,t;return n=d3.time.scale().domain([this.startDate,d3.time.day.offset(this.startDate,d3.max(this.data,function(n){return n.stats.max})+2)]).range([0,this.width]),t=d3.scale.ordinal().domain(d3.map(this.data,function(n){return n.user.name}).keys()).rangePoints([0,this.height],1),this.xAxis=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format("%b %e")),this.yAxis=d3.svg.axis().scale(t).orient("left").ticks(10),this.svg.append("g").attr("class","axis x.axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Developers")},n.prototype.doDraw=function(){var i,n,t;return i=d3.time.format("%Y-%m-%d"),n=d3.time.scale().domain([this.startDate,d3.time.day.offset(this.startDate,d3.max(this.data,function(n){return n.stats.max})+2)]).range([0,this.width]),t=d3.scale.ordinal().domain(d3.map(this.data,function(n){return n.user.name}).keys()).rangePoints([0,this.height],1),this.svg.selectAll(".y.axis").call(this.yAxis),this.svg.selectAll(".x.axis").call(this.xAxis),this.drawBar(n,t,this.startDate),this.drawFrontWhisker(n,t,this.startDate),this.drawBackWhisker(n,t,this.startDate),this.svg.selectAll(".median").data(this.data.filter(function(n){return n.stats.median!==n.stats.quartile1&&n.stats.median!==n.stats.quartile3})).enter().append("line").attr("class","median").attr("x1",function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.median)}}(this)).attr("x2",function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.median)}}(this)).attr("y1",function(n){return t(n.user.name)-10}).attr("y2",function(n){return t(n.user.name)+10})},n.prototype.drawBar=function(n,t,i){var r,u,f,o,e;return this.startDate=i,f=function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.quartile1)}}(this),u=function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,i.stats.quartile3)}}(this),e=function(n){return n.stats.quartile1===n.stats.median&&n.stats.quartile3===n.stats.median?f(n)-3:f(n)},o=function(n){return n.stats.quartile1===n.stats.median&&n.stats.quartile3===n.stats.median?u(n)+3:u(n)},r=this.svg.selectAll(".bar").data(this.data.filter(function(n){return function(t){return n.showUnassignedTasks===!0||n.showUnassignedTasks===!1&&t.user.name!=="Unassigned"}}(this))),r.enter().append("rect").attr("class","bar").attr("x",function(n){return e(n)}).attr("height",20).attr("y",function(n){return t(n.user.name)-10}).attr("width",function(){return function(n){return o(n)-e(n)}}(this)),r.exit().remove()},n.prototype.drawFrontWhisker=function(n,t,i){var r,f,e,u,o;return this.startDate=i,f=this.svg.selectAll(".front-whisker").data(this.data).enter(),u=function(n){return n.stats.min},e=function(n){return n.stats.quartile1},o=function(t){return function(i,r){return t.getCoordinateFromDate(n,t.startDate,r(i))}}(this),r=function(n){return u(n)===e(n)?o(n,u)-6:o(n,u)},f.append("line").attr("class","whisker").attr("x1",function(){return function(n){return r(n)}}(this)).attr("x2",function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,e(i))}}(this)).attr("y1",function(n){return t(n.user.name)}).attr("y2",function(n){return t(n.user.name)}),f.append("line").attr("class","whisker").attr("x1",function(){return function(n){return r(n)}}(this)).attr("x2",function(){return function(n){return r(n)}}(this)).attr("y1",function(n){return t(n.user.name)-10}).attr("y2",function(n){return t(n.user.name)+10})},n.prototype.drawBackWhisker=function(n,t,i){var f,r,u,e,o;return this.startDate=i,f=this.svg.selectAll(".back-whisker").data(this.data).enter(),e=function(n){return n.stats.quartile3},u=function(n){return n.stats.max},o=function(t){return function(i,r){return t.getCoordinateFromDate(n,t.startDate,r(i))}}(this),r=function(n){return e(n)===u(n)?o(n,u)+6:o(n,u)},f.append("line").attr("class","whisker").attr("x1",function(t){return function(i){return t.getCoordinateFromDate(n,t.startDate,e(i))}}(this)).attr("x2",function(){return function(n){return r(n)}}(this)).attr("y1",function(n){return t(n.user.name)}).attr("y2",function(n){return t(n.user.name)}),f.append("line").attr("class","whisker").attr("x1",function(){return function(n){return r(n)}}(this)).attr("x2",function(){return function(n){return r(n)}}(this)).attr("y1",function(n){return t(n.user.name)-10}).attr("y2",function(n){return t(n.user.name)+10})},n.prototype.getCoordinateFromDate=function(n,t,i){return this.startDate=t,n(d3.time.day.offset(this.startDate,i))},n}()}).call(this);
//# sourceMappingURL=user-schedule.min.js.map
